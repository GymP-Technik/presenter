var pt=Object.defineProperty;var _t=(t,e,n)=>e in t?pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>(_t(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function q(){}function Qe(t,e){for(const n in e)t[n]=e[n];return t}function xe(t){return t()}function Ie(){return Object.create(null)}function P(t){t.forEach(xe)}function Te(t){return typeof t=="function"}function U(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ht(t){return Object.keys(t).length===0}function et(t,...e){if(t==null){for(const s of e)s(void 0);return q}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t,e,n){t.$$.on_destroy.push(et(e,n))}function x(t,e,n){return t.set(n),e}function d(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function C(){return N(" ")}function ve(){return N("")}function H(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mt(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}function de(t,e){t.value=e??""}function pe(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function me(t,e,n){t.classList.toggle(e,!!n)}function gt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function ge(t,e){return new t(e)}let ce;function ie(t){ce=t}function we(){if(!ce)throw new Error("Function called outside component initialization");return ce}function qe(t){we().$$.on_mount.push(t)}function bt(t){we().$$.after_update.push(t)}function vt(t){we().$$.on_destroy.push(t)}function wt(){const t=we();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const r=gt(e,n,{cancelable:s});return l.slice().forEach(c=>{c.call(t,r)}),!r.defaultPrevented}return!0}}function Me(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const ee=[],be=[];let te=[];const Pe=[],tt=Promise.resolve();let Le=!1;function nt(){Le||(Le=!0,tt.then(lt))}function st(){return nt(),tt}function Ce(t){te.push(t)}const Ee=new Set;let G=0;function lt(){if(G!==0)return;const t=ce;do{try{for(;G<ee.length;){const e=ee[G];G++,ie(e),yt(e.$$)}}catch(e){throw ee.length=0,G=0,e}for(ie(null),ee.length=0,G=0;be.length;)be.pop()();for(let e=0;e<te.length;e+=1){const n=te[e];Ee.has(n)||(Ee.add(n),n())}te.length=0}while(ee.length);for(;Pe.length;)Pe.pop()();Le=!1,Ee.clear(),ie(t)}function yt(t){if(t.fragment!==null){t.update(),P(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ce)}}function kt(t){const e=[],n=[];te.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),te=e}const he=new Set;let Y;function ye(){Y={r:0,c:[],p:Y}}function ke(){Y.r||P(Y.c),Y=Y.p}function A(t,e){t&&t.i&&(he.delete(t),t.i(e))}function M(t,e,n,s){if(t&&t.o){if(he.has(t))return;he.add(t),Y.c.push(()=>{he.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $t(t,e){t.d(1),e.delete(t.key)}function jt(t,e,n,s,l,r,c,i,o,u,f,_){let g=t.length,$=r.length,m=g;const p={};for(;m--;)p[t[m].key]=m;const h=[],O=new Map,v=new Map,I=[];for(m=$;m--;){const j=_(l,r,m),L=n(j);let T=c.get(L);T?s&&I.push(()=>T.p(j,e)):(T=u(L,j),T.c()),O.set(L,h[m]=T),L in p&&v.set(L,Math.abs(m-p[L]))}const w=new Set,y=new Set;function k(j){A(j,1),j.m(i,f),c.set(j.key,j),f=j.first,$--}for(;g&&$;){const j=h[$-1],L=t[g-1],T=j.key,z=L.key;j===L?(f=j.first,g--,$--):O.has(z)?!c.has(T)||w.has(T)?k(j):y.has(z)?g--:v.get(T)>v.get(z)?(y.add(T),k(j)):(w.add(z),g--):(o(L,c),g--)}for(;g--;){const j=t[g];O.has(j.key)||o(j,c)}for(;$;)k(h[$-1]);return P(I),h}function it(t,e){const n={},s={},l={$$scope:1};let r=t.length;for(;r--;){const c=t[r],i=e[r];if(i){for(const o in c)o in i||(s[o]=1);for(const o in i)l[o]||(n[o]=i[o],l[o]=1);t[r]=i}else for(const o in c)l[o]=1}for(const c in s)c in n||(n[c]=void 0);return n}function ot(t){return typeof t=="object"&&t!==null?t:{}}function J(t){t&&t.c()}function D(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),Ce(()=>{const r=t.$$.on_mount.map(xe).filter(Te);t.$$.on_destroy?t.$$.on_destroy.push(...r):P(r),t.$$.on_mount=[]}),l.forEach(Ce)}function V(t,e){const n=t.$$;n.fragment!==null&&(kt(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function St(t,e){t.$$.dirty[0]===-1&&(ee.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,s,l,r,c,i=[-1]){const o=ce;ie(t);const u=t.$$={fragment:null,ctx:[],props:r,update:q,not_equal:l,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Ie(),dirty:i,skip_bound:!1,root:e.target||o.$$.root};c&&c(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(_,g,...$)=>{const m=$.length?$[0]:g;return u.ctx&&l(u.ctx[_],u.ctx[_]=m)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](m),f&&St(t,_)),g}):[],u.update(),f=!0,P(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const _=mt(e.target);u.fragment&&u.fragment.l(_),_.forEach(S)}else u.fragment&&u.fragment.c();e.intro&&A(t.$$.fragment),D(t,e.target,e.anchor),lt()}ie(o)}class F{constructor(){Se(this,"$$");Se(this,"$$set")}$destroy(){V(this,1),this.$destroy=q}$on(e,n){if(!Te(n))return q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);const Q=[];function rt(t,e){return{subscribe:ne(t,e).subscribe}}function ne(t,e=q){let n;const s=new Set;function l(i){if(U(t,i)&&(t=i,n)){const o=!Q.length;for(const u of s)u[1](),Q.push(u,t);if(o){for(let u=0;u<Q.length;u+=2)Q[u][0](Q[u+1]);Q.length=0}}}function r(i){l(i(t))}function c(i,o=q){const u=[i,o];return s.add(u),s.size===1&&(n=e(l,r)||q),i(t),()=>{s.delete(u),s.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:c}}function ct(t,e,n){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return rt(n,(c,i)=>{let o=!1;const u=[];let f=0,_=q;const g=()=>{if(f)return;_();const m=e(s?u[0]:u,c,i);r?c(m):_=Te(m)?m:q},$=l.map((m,p)=>et(m,h=>{u[p]=h,f&=~(1<<p),o&&g()},()=>{f|=1<<p}));return o=!0,g(),function(){P($),_(),o=!1}})}function Ot(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,l,r,c=[],i="",o=t.split("/");for(o[0]||o.shift();l=o.shift();)n=l[0],n==="*"?(c.push("wild"),i+="/(.*)"):n===":"?(s=l.indexOf("?",1),r=l.indexOf(".",1),c.push(l.substring(1,~s?s:~r?r:l.length)),i+=~s&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(i+=(~s?"?":"")+"\\"+l.substring(r))):i+="/"+l;return{keys:c,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Lt(t){let e,n,s;const l=[t[2]];var r=t[0];function c(i){let o={};for(let u=0;u<l.length;u+=1)o=Qe(o,l[u]);return{props:o}}return r&&(e=ge(r,c()),e.$on("routeEvent",t[7])),{c(){e&&J(e.$$.fragment),n=ve()},m(i,o){e&&D(e,i,o),E(i,n,o),s=!0},p(i,o){const u=o&4?it(l,[ot(i[2])]):{};if(o&1&&r!==(r=i[0])){if(e){ye();const f=e;M(f.$$.fragment,1,0,()=>{V(f,1)}),ke()}r?(e=ge(r,c()),e.$on("routeEvent",i[7]),J(e.$$.fragment),A(e.$$.fragment,1),D(e,n.parentNode,n)):e=null}else r&&e.$set(u)},i(i){s||(e&&A(e.$$.fragment,i),s=!0)},o(i){e&&M(e.$$.fragment,i),s=!1},d(i){i&&S(n),e&&V(e,i)}}}function Ct(t){let e,n,s;const l=[{params:t[1]},t[2]];var r=t[0];function c(i){let o={};for(let u=0;u<l.length;u+=1)o=Qe(o,l[u]);return{props:o}}return r&&(e=ge(r,c()),e.$on("routeEvent",t[6])),{c(){e&&J(e.$$.fragment),n=ve()},m(i,o){e&&D(e,i,o),E(i,n,o),s=!0},p(i,o){const u=o&6?it(l,[o&2&&{params:i[1]},o&4&&ot(i[2])]):{};if(o&1&&r!==(r=i[0])){if(e){ye();const f=e;M(f.$$.fragment,1,0,()=>{V(f,1)}),ke()}r?(e=ge(r,c()),e.$on("routeEvent",i[6]),J(e.$$.fragment),A(e.$$.fragment,1),D(e,n.parentNode,n)):e=null}else r&&e.$set(u)},i(i){s||(e&&A(e.$$.fragment,i),s=!0)},o(i){e&&M(e.$$.fragment,i),s=!1},d(i){i&&S(n),e&&V(e,i)}}}function Tt(t){let e,n,s,l;const r=[Ct,Lt],c=[];function i(o,u){return o[1]?0:1}return e=i(t),n=c[e]=r[e](t),{c(){n.c(),s=ve()},m(o,u){c[e].m(o,u),E(o,s,u),l=!0},p(o,[u]){let f=e;e=i(o),e===f?c[e].p(o,u):(ye(),M(c[f],1,1,()=>{c[f]=null}),ke(),n=c[e],n?n.p(o,u):(n=c[e]=r[e](o),n.c()),A(n,1),n.m(s.parentNode,s))},i(o){l||(A(n),l=!0)},o(o){M(n),l=!1},d(o){o&&S(s),c[e].d(o)}}}function De(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const Ne=rt(null,function(e){e(De());const n=()=>{e(De())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ct(Ne,t=>t.location);ct(Ne,t=>t.querystring);const Ve=ne(void 0);async function ue(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await st(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function qt(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Nt(t,e,n){let{routes:s={}}=e,{prefix:l=""}=e,{restoreScrollState:r=!1}=e;class c{constructor(y,k){if(!k||typeof k!="function"&&(typeof k!="object"||k._sveltesparouter!==!0))throw Error("Invalid component object");if(!y||typeof y=="string"&&(y.length<1||y.charAt(0)!="/"&&y.charAt(0)!="*")||typeof y=="object"&&!(y instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:L}=Ot(y);this.path=y,typeof k=="object"&&k._sveltesparouter===!0?(this.component=k.component,this.conditions=k.conditions||[],this.userData=k.userData,this.props=k.props||{}):(this.component=()=>Promise.resolve(k),this.conditions=[],this.props={}),this._pattern=j,this._keys=L}match(y){if(l){if(typeof l=="string")if(y.startsWith(l))y=y.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const T=y.match(l);if(T&&T[0])y=y.substr(T[0].length)||"/";else return null}}const k=this._pattern.exec(y);if(k===null)return null;if(this._keys===!1)return k;const j={};let L=0;for(;L<this._keys.length;){try{j[this._keys[L]]=decodeURIComponent(k[L+1]||"")||null}catch{j[this._keys[L]]=null}L++}return j}async checkConditions(y){for(let k=0;k<this.conditions.length;k++)if(!await this.conditions[k](y))return!1;return!0}}const i=[];s instanceof Map?s.forEach((w,y)=>{i.push(new c(y,w))}):Object.keys(s).forEach(w=>{i.push(new c(w,s[w]))});let o=null,u=null,f={};const _=wt();async function g(w,y){await st(),_(w,y)}let $=null,m=null;r&&(m=w=>{w.state&&(w.state.__svelte_spa_router_scrollY||w.state.__svelte_spa_router_scrollX)?$=w.state:$=null},window.addEventListener("popstate",m),bt(()=>{qt($)}));let p=null,h=null;const O=Ne.subscribe(async w=>{p=w;let y=0;for(;y<i.length;){const k=i[y].match(w.location);if(!k){y++;continue}const j={route:i[y].path,location:w.location,querystring:w.querystring,userData:i[y].userData,params:k&&typeof k=="object"&&Object.keys(k).length?k:null};if(!await i[y].checkConditions(j)){n(0,o=null),h=null,g("conditionsFailed",j);return}g("routeLoading",Object.assign({},j));const L=i[y].component;if(h!=L){L.loading?(n(0,o=L.loading),h=L,n(1,u=L.loadingParams),n(2,f={}),g("routeLoaded",Object.assign({},j,{component:o,name:o.name,params:u}))):(n(0,o=null),h=null);const T=await L();if(w!=p)return;n(0,o=T&&T.default||T),h=L}k&&typeof k=="object"&&Object.keys(k).length?n(1,u=k):n(1,u=null),n(2,f=i[y].props),g("routeLoaded",Object.assign({},j,{component:o,name:o.name,params:u})).then(()=>{Ve.set(u)});return}n(0,o=null),h=null,Ve.set(void 0)});vt(()=>{O(),m&&window.removeEventListener("popstate",m)});function v(w){Me.call(this,t,w)}function I(w){Me.call(this,t,w)}return t.$$set=w=>{"routes"in w&&n(3,s=w.routes),"prefix"in w&&n(4,l=w.prefix),"restoreScrollState"in w&&n(5,r=w.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=r?"manual":"auto")},[o,u,f,s,l,r,v,I]}class At extends F{constructor(e){super(),R(this,e,Nt,Tt,U,{routes:3,prefix:4,restoreScrollState:5})}}function Re(t){let e,n,s,l,r;return{c(){e=b("div"),s=C(),l=b("p"),r=N(t[2]),a(e,"class","status svelte-mn8p7g"),a(e,"style",n=`background-color: var(--color-${t[2]})`),a(l,"class","svelte-mn8p7g")},m(c,i){E(c,e,i),E(c,s,i),E(c,l,i),d(l,r)},p(c,i){i&4&&n!==(n=`background-color: var(--color-${c[2]})`)&&a(e,"style",n),i&4&&re(r,c[2])},d(c){c&&(S(e),S(s),S(l))}}}function Fe(t){let e,n,s,l;function r(o,u){return o[3]?It:Ht}let i=r(t)(t);return{c(){e=b("div"),n=b("p"),i.c(),s=N("-"),l=N(t[4]),a(n,"class","svelte-mn8p7g"),a(e,"class","right svelte-mn8p7g")},m(o,u){E(o,e,u),d(e,n),i.m(n,null),d(n,s),d(n,l)},p:q,d(o){o&&S(e),i.d()}}}function Ht(t){let e;return{c(){e=N(`prod
				`)},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function It(t){let e;return{c(){e=N("dev")},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function Mt(t){let e,n,s,l=t[0]&&Re(t),r=t[1]&&Fe(t);return{c(){e=b("footer"),n=b("div"),l&&l.c(),s=C(),r&&r.c(),a(n,"class","left svelte-mn8p7g"),a(e,"class","svelte-mn8p7g")},m(c,i){E(c,e,i),d(e,n),l&&l.m(n,null),d(e,s),r&&r.m(e,null)},p(c,[i]){c[0]?l?l.p(c,i):(l=Re(c),l.c(),l.m(n,null)):l&&(l.d(1),l=null),c[1]?r?r.p(c,i):(r=Fe(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:q,o:q,d(c){c&&S(e),l&&l.d(),r&&r.d()}}}function Pt(t,e,n){let{ping:s=!1}=e,{build:l=!1}=e,r="Pending",c=fetch(`${window.apiHost}/ping`);qe(async()=>{if(!(await c).ok){n(2,r="Unreachable");return}n(2,r="Reachable")});let i=!1,o="554c7ea92a83af9068f0496194188b4252e1c6a0".slice(0,12);return t.$$set=u=>{"ping"in u&&n(0,s=u.ping),"build"in u&&n(1,l=u.build)},[s,l,r,i,o]}class ut extends F{constructor(e){super(),R(this,e,Pt,Mt,U,{ping:0,build:1})}}const _e=ne({running:!1,text:"Loading",fetching:!0,playing:""}),le=ne([]),oe=ne(!1);function Je(t,e,n){const s=t.slice();return s[15]=e[n],s}function Be(t,e){let n,s,l,r,c,i=e[15].filename+"",o,u,f,_=new Date(e[15].date)+"",g,$,m,p,h,O,v,I,w,y,k,j,L,T,z,W,X,ae,fe,Ae,je,He;function at(){return e[9](e[15])}function ft(){return e[10](e[15])}function dt(){return e[11](e[15])}return{key:t,first:null,c(){n=b("div"),s=b("div"),l=C(),r=b("div"),c=b("p"),o=N(i),u=C(),f=b("span"),g=N(_),$=C(),m=b("div"),p=C(),h=b("div"),O=b("button"),v=K("svg"),I=K("path"),y=C(),k=b("button"),j=K("svg"),L=K("path"),z=C(),W=b("button"),X=K("svg"),ae=K("path"),Ae=C(),a(s,"class","status svelte-1f2bpgr"),me(s,"selected",e[3].includes(e[15].uuid)),a(c,"class","svelte-1f2bpgr"),a(f,"class","svelte-1f2bpgr"),a(r,"class","infos svelte-1f2bpgr"),a(m,"class","position"),a(I,"fill","currentColor"),a(I,"d","M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z"),a(v,"xmlns","http://www.w3.org/2000/svg"),a(v,"width","20"),a(v,"height","20"),a(v,"viewBox","0 0 24 24"),O.disabled=w=e[3].includes(e[15].uuid),a(L,"fill","currentColor"),a(L,"d","M8 18q-.825 0-1.413-.588T6 16V8q0-.825.588-1.413T8 6h8q.825 0 1.413.588T18 8v8q0 .825-.588 1.413T16 18H8Z"),a(j,"xmlns","http://www.w3.org/2000/svg"),a(j,"width","20"),a(j,"height","20"),a(j,"viewBox","0 0 24 24"),k.disabled=T=!e[3].includes(e[15].uuid),a(ae,"fill","currentColor"),a(ae,"d","M7 21q-.825 0-1.413-.588T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.588 1.413T17 21H7Zm2-4h2V8H9v9Zm4 0h2V8h-2v9Z"),a(X,"xmlns","http://www.w3.org/2000/svg"),a(X,"width","20"),a(X,"height","20"),a(X,"viewBox","0 0 24 24"),W.disabled=fe=e[3].includes(e[15].uuid),a(h,"class","actions svelte-1f2bpgr"),a(n,"class","video svelte-1f2bpgr"),this.first=n},m(se,B){E(se,n,B),d(n,s),d(n,l),d(n,r),d(r,c),d(c,o),d(r,u),d(r,f),d(f,g),d(n,$),d(n,m),d(n,p),d(n,h),d(h,O),d(O,v),d(v,I),d(h,y),d(h,k),d(k,j),d(j,L),d(h,z),d(h,W),d(W,X),d(X,ae),d(n,Ae),je||(He=[H(O,"click",at),H(k,"click",ft),H(W,"click",dt)],je=!0)},p(se,B){e=se,B&9&&me(s,"selected",e[3].includes(e[15].uuid)),B&1&&i!==(i=e[15].filename+"")&&re(o,i),B&1&&_!==(_=new Date(e[15].date)+"")&&re(g,_),B&9&&w!==(w=e[3].includes(e[15].uuid))&&(O.disabled=w),B&9&&T!==(T=!e[3].includes(e[15].uuid))&&(k.disabled=T),B&9&&fe!==(fe=e[3].includes(e[15].uuid))&&(W.disabled=fe)},d(se){se&&S(n),je=!1,P(He)}}}function Ut(t){let e,n,s,l,r=[],c=new Map,i,o,u,f,_,g=Ue(t[0]);const $=m=>m[15].uuid;for(let m=0;m<g.length;m+=1){let p=Je(t,g,m),h=$(p);c.set(h,r[m]=Be(h,p))}return{c(){e=b("div"),n=b("div"),n.innerHTML='<p class="svelte-1f2bpgr">Click to upload</p>',s=C(),l=b("div");for(let m=0;m<r.length;m+=1)r[m].c();i=C(),o=b("form"),u=b("input"),a(n,"class","upload svelte-1f2bpgr"),a(l,"class","list svelte-1f2bpgr"),a(u,"type","file"),a(u,"name","fileUpload"),a(u,"id","fileUpload"),pe(u,"opacity","0"),pe(u,"height","0px"),pe(u,"width","0px"),a(u,"accept","video/mp4,video/x-m4v,video/*"),a(o,"method","POST"),a(o,"enctype","multipart/form-data"),a(o,"action",`${window.apiHost}/upload`),pe(o,"height","0px"),a(e,"class","container svelte-1f2bpgr")},m(m,p){E(m,e,p),d(e,n),d(e,s),d(e,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);d(e,i),d(e,o),d(o,u),t[12](u),t[13](o),f||(_=[H(n,"click",t[7]),H(u,"change",t[8])],f=!0)},p(m,[p]){p&121&&(g=Ue(m[0]),r=jt(r,p,$,1,m,g,c,l,$t,Be,null,Je))},i:q,o:q,d(m){m&&S(e);for(let p=0;p<r.length;p+=1)r[p].d();t[12](null),t[13](null),f=!1,P(_)}}}function Dt(t,e,n){let s,l;Z(t,le,v=>n(3,s=v)),Z(t,oe,v=>n(14,l=v));let r=[];async function c(v){const w=await(await fetch(`${window.apiHost}/videos/${v}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({})})).json();n(0,r=w)}async function i(v){x(le,s[s.length]=v,s),x(oe,l=!0,l)}async function o(v){x(le,s=s.filter(I=>I!=v),s),x(oe,l=!0,l)}let u,f;function _(){u.click()}async function g(){f.submit()}qe(async()=>{const I=await(await fetch(`${window.apiHost}/videos`)).json();n(0,r=I);const y=await(await fetch(`${window.apiHost}/timeline`)).json();x(le,s=y,s)});const $=v=>i(v.uuid),m=v=>o(v.uuid),p=v=>c(v.uuid);function h(v){be[v?"unshift":"push"](()=>{u=v,n(1,u)})}function O(v){be[v?"unshift":"push"](()=>{f=v,n(2,f)})}return[r,u,f,s,c,i,o,_,g,$,m,p,h,O]}class Vt extends F{constructor(e){super(),R(this,e,Dt,Ut,U,{})}}function Rt(t){let e,n,s,l,r;return{c(){e=b("button"),n=N("Start"),e.disabled=s=t[1].fetching},m(c,i){E(c,e,i),d(e,n),l||(r=H(e,"click",t[6]),l=!0)},p(c,i){i&2&&s!==(s=c[1].fetching)&&(e.disabled=s)},d(c){c&&S(e),l=!1,r()}}}function Ft(t){let e,n,s,l,r,c,i,o,u;return{c(){e=b("button"),n=N("Restart"),l=C(),r=b("button"),c=N("Stop"),e.disabled=s=t[1].fetching,r.disabled=i=t[1].fetching},m(f,_){E(f,e,_),d(e,n),E(f,l,_),E(f,r,_),d(r,c),o||(u=[H(e,"click",t[4]),H(r,"click",t[5])],o=!0)},p(f,_){_&2&&s!==(s=f[1].fetching)&&(e.disabled=s),_&2&&i!==(i=f[1].fetching)&&(r.disabled=i)},d(f){f&&(S(e),S(l),S(r)),o=!1,P(u)}}}function Jt(t){let e,n,s,l=t[1].text+"",r,c,i,o,u,f,_,g,$;function m(O,v){return O[1].running?Ft:Rt}let p=m(t),h=p(t);return{c(){e=b("div"),n=b("div"),s=b("p"),r=N(l),c=C(),i=b("div"),h.c(),o=C(),u=b("button"),f=N("Store playlist"),a(s,"class","svelte-1cf5ncp"),a(n,"class","status svelte-1cf5ncp"),u.disabled=_=!t[0],a(i,"class","controlls svelte-1cf5ncp"),a(e,"class","container svelte-1cf5ncp")},m(O,v){E(O,e,v),d(e,n),d(n,s),d(s,r),d(e,c),d(e,i),h.m(i,null),d(i,o),d(i,u),d(u,f),g||($=H(u,"click",t[7]),g=!0)},p(O,[v]){v&2&&l!==(l=O[1].text+"")&&re(r,l),p===(p=m(O))&&h?h.p(O,v):(h.d(1),h=p(O),h&&(h.c(),h.m(i,o))),v&1&&_!==(_=!O[0])&&(u.disabled=_)},i:q,o:q,d(O){O&&S(e),h.d(),g=!1,$()}}}function Bt(t,e,n){let s,l,r;Z(t,oe,g=>n(0,s=g)),Z(t,le,g=>n(8,l=g)),Z(t,_e,g=>n(1,r=g));async function c(g){_e.update(p=>(p.fetching=!0,p));const m=await(await fetch(`${window.apiHost}/vlc/${g}`,{method:"put",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({})})).json();_e.set(m)}async function i(){(await fetch(`${window.apiHost}/timeline`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({playlist:l})})).ok&&x(oe,s=!1,s)}return qe(async()=>{const $=await(await fetch(`${window.apiHost}/vlc`)).json();_e.set($)}),[s,r,c,i,()=>c("restart"),()=>c("stop"),()=>c("start"),()=>i()]}class zt extends F{constructor(e){super(),R(this,e,Bt,Jt,U,{})}}function ze(t){var e=t.split(".")[1],n=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(n).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}const Oe={Expired:"Timeout",Invalid:"Wrong password or username"};function Xt(){const t={authenticated:!1,roles:[],validUntil:0,error:void 0};let e=!0;function n(){localStorage.removeItem("auth"),r(t),ue("/")}async function s(o,u){const f=await fetch(`${window.apiHost}/login`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:o,password:u})});if(f.ok){const _=(await f.json()).jwt,g=ze(_);return r({authenticated:!0,roles:g.roles,validUntil:g.validUntil,error:void 0}),localStorage.setItem("auth",_),{success:!0}}else return r({...t,error:Oe.Invalid}),{success:!1,error:Oe.Invalid}}const{subscribe:l,set:r,update:c}=ne({...t,loading:!0},function(){if(e){if(localStorage.getItem("auth")!==null){const u=ze(localStorage.getItem("auth"));u.expire<Date.now()&&r({...t,error:Oe.Expired}),r({authenticated:!0,roles:u.roles,validUntil:u.validUntil,error:void 0})}e=!1}});return{subscribe:l,login:s,logout:n}}const $e=Xt();function Yt(t){let e,n,s,l,r,c,i;return s=new Vt({}),c=new zt({}),{c(){e=b("main"),n=b("div"),J(s.$$.fragment),l=C(),r=b("div"),J(c.$$.fragment),a(n,"class","clips svelte-1aicb0x"),a(r,"class","controls svelte-1aicb0x"),a(e,"class","svelte-1aicb0x")},m(o,u){E(o,e,u),d(e,n),D(s,n,null),d(e,l),d(e,r),D(c,r,null),i=!0},p:q,i(o){i||(A(s.$$.fragment,o),A(c.$$.fragment,o),i=!0)},o(o){M(s.$$.fragment,o),M(c.$$.fragment,o),i=!1},d(o){o&&S(e),V(s),V(c)}}}function Zt(t,e,n){let s;return Z(t,$e,l=>n(0,s=l)),t.$$.update=()=>{t.$$.dirty&1&&(s.authenticated||ue("/login"))},[s]}class Wt extends F{constructor(e){super(),R(this,e,Zt,Yt,U,{})}}class Xe extends F{constructor(e){super(),R(this,e,null,null,U,{})}}class Kt extends F{constructor(e){super(),R(this,e,null,null,U,{})}}function Ye(t){let e,n,s,l,r;return{c(){e=b("div"),n=b("h1"),n.textContent="Login Error",s=C(),l=b("p"),r=N(t[3]),a(n,"class","svelte-4yqt73"),a(l,"class","svelte-4yqt73"),a(e,"class","error svelte-4yqt73")},m(c,i){E(c,e,i),d(e,n),d(e,s),d(e,l),d(l,r)},p(c,i){i&8&&re(r,c[3])},d(c){c&&S(e)}}}function Gt(t){let e;return{c(){e=N("Submit")},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function Qt(t){let e;return{c(){e=N("Loading")},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function xt(t){let e,n,s,l,r,c,i,o,u,f,_=t[3]!==void 0&&Ye(t);function g(p,h){return p[0]?Qt:Gt}let $=g(t),m=$(t);return{c(){e=b("main"),_&&_.c(),n=C(),s=b("form"),l=b("input"),r=C(),c=b("input"),i=C(),o=b("button"),m.c(),a(l,"type","text"),a(l,"name","username"),l.required=!0,a(l,"placeholder","Username"),a(l,"id","username"),l.disabled=t[0],a(l,"class","svelte-4yqt73"),a(c,"type","password"),a(c,"name","password"),c.required=!0,a(c,"placeholder","Password"),a(c,"id","password"),c.disabled=t[0],a(c,"class","svelte-4yqt73"),a(o,"type","submit"),a(o,"class","svelte-4yqt73"),me(o,"loading",t[0]),a(s,"class","svelte-4yqt73"),a(e,"class","svelte-4yqt73")},m(p,h){E(p,e,h),_&&_.m(e,null),d(e,n),d(e,s),d(s,l),de(l,t[1]),d(s,r),d(s,c),de(c,t[2]),d(s,i),d(s,o),m.m(o,null),u||(f=[H(l,"input",t[5]),H(c,"input",t[6]),H(s,"submit",t[4])],u=!0)},p(p,[h]){p[3]!==void 0?_?_.p(p,h):(_=Ye(p),_.c(),_.m(e,n)):_&&(_.d(1),_=null),h&1&&(l.disabled=p[0]),h&2&&l.value!==p[1]&&de(l,p[1]),h&1&&(c.disabled=p[0]),h&4&&c.value!==p[2]&&de(c,p[2]),$!==($=g(p))&&(m.d(1),m=$(p),m&&(m.c(),m.m(o,null))),h&1&&me(o,"loading",p[0])},i:q,o:q,d(p){p&&S(e),_&&_.d(),m.d(),u=!1,P(f)}}}function en(t,e,n){let s=!1,l="",r="",c;async function i(f){n(0,s=!0),f.preventDefault(),n(3,c=void 0);const{success:_,error:g}=await $e.login(l,r);_?ue("/"):(n(3,c=g),n(0,s=!1))}function o(){l=this.value,n(1,l)}function u(){r=this.value,n(2,r)}return[s,l,r,c,i,o,u]}class tn extends F{constructor(e){super(),R(this,e,en,xt,U,{})}}function nn(t){let e;return{c(){e=b("h1"),e.textContent="4041"},m(n,s){E(n,e,s)},p:q,i:q,o:q,d(n){n&&S(e)}}}class sn extends F{constructor(e){super(),R(this,e,null,nn,U,{})}}const ln={"/":Wt,"/management":Kt,"/login":tn,"/settings":Xe,"/settings/*":Xe,"*":sn};function Ze(t){let e,n,s,l=t[1].roles.includes("management"),r,c,i,o,u,f,_,g,$,m,p=l&&We(t);return _=new ut({props:{ping:!0,build:!1}}),{c(){e=b("nav"),n=b("div"),n.innerHTML='<p class="svelte-15jm9bn">Dashboard</p>',s=C(),p&&p.c(),r=C(),c=b("div"),c.innerHTML='<p class="svelte-15jm9bn">Settings</p>',i=C(),o=b("div"),o.innerHTML='<p class="svelte-15jm9bn">Logout</p>',u=C(),f=b("div"),J(_.$$.fragment),a(n,"class","category box svelte-15jm9bn"),a(c,"class","category box svelte-15jm9bn"),a(o,"class","category box svelte-15jm9bn"),a(f,"class","footer svelte-15jm9bn"),a(e,"class","svelte-15jm9bn")},m(h,O){E(h,e,O),d(e,n),d(e,s),p&&p.m(e,null),d(e,r),d(e,c),d(e,i),d(e,o),d(e,u),d(e,f),D(_,f,null),g=!0,$||(m=[H(n,"click",t[2]),H(c,"click",t[3]),H(o,"click",$e.logout)],$=!0)},p(h,O){O&2&&(l=h[1].roles.includes("management")),l?p?p.p(h,O):(p=We(h),p.c(),p.m(e,r)):p&&(p.d(1),p=null)},i(h){g||(A(_.$$.fragment,h),g=!0)},o(h){M(_.$$.fragment,h),g=!1},d(h){h&&S(e),p&&p.d(),V(_),$=!1,P(m)}}}function We(t){let e,n,s=t[0].includes("management"),l,r=t[0].includes("management")&&t[1].roles.includes("management.system"),c,i=s&&Ke(),o=r&&Ge();return{c(){e=b("div"),e.innerHTML='<p class="svelte-15jm9bn">Management</p>',n=C(),i&&i.c(),l=C(),o&&o.c(),c=ve(),a(e,"class","category box svelte-15jm9bn")},m(u,f){E(u,e,f),E(u,n,f),i&&i.m(u,f),E(u,l,f),o&&o.m(u,f),E(u,c,f)},p(u,f){f&1&&(s=u[0].includes("management")),s?i||(i=Ke(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),f&3&&(r=u[0].includes("management")&&u[1].roles.includes("management.system")),r?o||(o=Ge(),o.c(),o.m(c.parentNode,c)):o&&(o.d(1),o=null)},d(u){u&&(S(e),S(n),S(l),S(c)),i&&i.d(u),o&&o.d(u)}}}function Ke(t){let e;return{c(){e=b("div"),e.innerHTML='<p class="svelte-15jm9bn">Users</p>',a(e,"class","sub box svelte-15jm9bn")},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function Ge(t){let e;return{c(){e=b("div"),e.innerHTML='<p class="svelte-15jm9bn">System</p>',a(e,"class","sub box svelte-15jm9bn")},m(n,s){E(n,e,s)},d(n){n&&S(e)}}}function on(t){let e,n,s,l,r,c,i=t[1].authenticated&&Ze(t);return s=new At({props:{routes:ln}}),r=new ut({props:{ping:!1,build:!0}}),{c(){i&&i.c(),e=C(),n=b("div"),J(s.$$.fragment),l=C(),J(r.$$.fragment),a(n,"class","content svelte-15jm9bn")},m(o,u){i&&i.m(o,u),E(o,e,u),E(o,n,u),D(s,n,null),d(n,l),D(r,n,null),c=!0},p(o,[u]){o[1].authenticated?i?(i.p(o,u),u&2&&A(i,1)):(i=Ze(o),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(ye(),M(i,1,1,()=>{i=null}),ke())},i(o){c||(A(i),A(s.$$.fragment,o),A(r.$$.fragment,o),c=!0)},o(o){M(i),M(s.$$.fragment,o),M(r.$$.fragment,o),c=!1},d(o){o&&(S(e),S(n)),i&&i.d(o),V(s),V(r)}}}function rn(t,e,n){let s;Z(t,$e,i=>n(1,s=i));let l=[];localStorage.getItem("extended")!==null&&(l=JSON.parse(localStorage.getItem("extended")));const r=()=>ue("/"),c=()=>ue("/settings");return t.$$.update=()=>{t.$$.dirty&1&&localStorage.setItem("extended",JSON.stringify(l))},[l,s,r,c]}class cn extends F{constructor(e){super(),R(this,e,rn,on,U,{})}}window.apiHost="";new cn({target:document.getElementById("app")});
