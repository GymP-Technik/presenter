var ge=Object.defineProperty;var ve=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>(ve(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function w(){}function pe(e){return e()}function ce(){return Object.create(null)}function P(e){e.forEach(pe)}function he(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function be(e){return Object.keys(e).length===0}function ye(e,...t){if(e==null){for(const s of t)s(void 0);return w}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function _e(e,t,n){e.$$.on_destroy.push(ye(t,n))}function p(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function $(){return C(" ")}function A(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function we(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function Z(e,t,n){e.classList.toggle(t,!!n)}let I;function F(e){I=e}function $e(){if(!I)throw new Error("Function called outside component initialization");return I}function re(e){$e().$$.on_mount.push(e)}const T=[],W=[];let V=[];const ue=[],ke=Promise.resolve();let le=!1;function Ee(){le||(le=!0,ke.then(me))}function oe(e){V.push(e)}const ne=new Set;let j=0;function me(){if(j!==0)return;const e=I;do{try{for(;j<T.length;){const t=T[j];j++,F(t),Le(t.$$)}}catch(t){throw T.length=0,j=0,t}for(F(null),T.length=0,j=0;W.length;)W.pop()();for(let t=0;t<V.length;t+=1){const n=V[t];ne.has(n)||(ne.add(n),n())}V.length=0}while(T.length);for(;ue.length;)ue.pop()();le=!1,ne.clear(),F(e)}function Le(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}function Se(e){const t=[],n=[];V.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),V=t}const K=new Set;let He;function B(e,t){e&&e.i&&(K.delete(e),e.i(t))}function se(e,t,n,s){if(e&&e.o){if(K.has(e))return;K.add(e),He.c.push(()=>{K.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Me(e,t){e.d(1),t.delete(e.key)}function Oe(e,t,n,s,l,o,u,f,c,i,r,a){let _=e.length,b=o.length,d=_;const y={};for(;d--;)y[e[d].key]=d;const h=[],H=new Map,M=new Map,z=[];for(d=b;d--;){const v=a(l,o,d),E=n(v);let L=u.get(E);L?s&&z.push(()=>L.p(v,t)):(L=i(E,v),L.c()),H.set(E,h[d]=L),E in y&&M.set(E,Math.abs(d-y[E]))}const U=new Set,D=new Set;function O(v){B(v,1),v.m(f,r),u.set(v.key,v),r=v.first,b--}for(;_&&b;){const v=h[b-1],E=e[_-1],L=v.key,R=E.key;v===E?(r=v.first,_--,b--):H.has(R)?!u.has(L)||U.has(L)?O(v):D.has(R)?_--:M.get(L)>M.get(R)?(D.add(L),O(v)):(U.add(R),_--):(c(E,u),_--)}for(;_--;){const v=e[_];H.has(v.key)||c(v,u)}for(;b;)O(h[b-1]);return P(z),h}function ie(e){e&&e.c()}function G(e,t,n){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,n),oe(()=>{const o=e.$$.on_mount.map(pe).filter(he);e.$$.on_destroy?e.$$.on_destroy.push(...o):P(o),e.$$.on_mount=[]}),l.forEach(oe)}function J(e,t){const n=e.$$;n.fragment!==null&&(Se(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(T.push(e),Ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(e,t,n,s,l,o,u,f=[-1]){const c=I;F(e);const i=e.$$={fragment:null,ctx:[],props:o,update:w,not_equal:l,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ce(),dirty:f,skip_bound:!1,root:t.target||c.$$.root};u&&u(i.root);let r=!1;if(i.ctx=n?n(e,t.props||{},(a,_,...b)=>{const d=b.length?b[0]:_;return i.ctx&&l(i.ctx[a],i.ctx[a]=d)&&(!i.skip_bound&&i.bound[a]&&i.bound[a](d),r&&Ce(e,a)),_}):[],i.update(),r=!0,P(i.before_update),i.fragment=s?s(i.ctx):!1,t.target){if(t.hydrate){const a=we(t.target);i.fragment&&i.fragment.l(a),a.forEach(k)}else i.fragment&&i.fragment.c();t.intro&&B(e.$$.fragment),G(e,t.target,t.anchor),me()}F(c)}class Y{constructor(){ee(this,"$$");ee(this,"$$set")}$destroy(){J(this,1),this.$destroy=w}$on(t,n){if(!he(n))return w;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pe);const N=[];function Ae(e,t=w){let n;const s=new Set;function l(f){if(x(e,f)&&(e=f,n)){const c=!N.length;for(const i of s)i[1](),N.push(i,e);if(c){for(let i=0;i<N.length;i+=2)N[i][0](N[i+1]);N.length=0}}}function o(f){l(f(e))}function u(f,c=w){const i=[f,c];return s.add(i),s.size===1&&(n=t(l,o)||w),f(e),()=>{s.delete(i),s.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:u}}const q=Ae({running:!1,text:"Loading",fetching:!0,playing:""});function ae(e,t,n){const s=e.slice();return s[13]=t[n],s}function de(e,t){let n,s,l,o,u=t[13].filename+"",f,c,i,r=new Date(t[13].date)+"",a,_,b,d,y,h,H,M,z;function U(){return t[9](t[13])}function D(){return t[10](t[13])}return{key:e,first:null,c(){n=g("div"),s=g("div"),l=$(),o=g("p"),f=C(u),c=$(),i=g("span"),a=C(r),_=$(),b=g("div"),d=g("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z"></path></svg>',y=$(),h=g("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.413-.588T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.588 1.413T17 21H7Zm2-4h2V8H9v9Zm4 0h2V8h-2v9Z"></path></svg>',H=$(),m(s,"class","thumbnail"),m(o,"class","svelte-upbmct"),m(b,"class","actions"),m(n,"class","video svelte-upbmct"),Z(n,"selected",t[13].uuid==t[1]),Z(n,"playing",t[4].playing),this.first=n},m(O,v){S(O,n,v),p(n,s),p(n,l),p(n,o),p(o,f),p(n,c),p(n,i),p(i,a),p(n,_),p(n,b),p(b,d),p(b,y),p(b,h),p(n,H),M||(z=[A(d,"click",U),A(h,"click",D)],M=!0)},p(O,v){t=O,v&1&&u!==(u=t[13].filename+"")&&Q(f,u),v&1&&r!==(r=new Date(t[13].date)+"")&&Q(a,r),v&3&&Z(n,"selected",t[13].uuid==t[1]),v&16&&Z(n,"playing",t[4].playing)},d(O){O&&k(n),M=!1,P(z)}}}function je(e){let t,n,s,l,o=[],u=new Map,f,c,i,r,a,_=fe(e[0]);const b=d=>d[13].uuid;for(let d=0;d<_.length;d+=1){let y=ae(e,_,d),h=b(y);u.set(h,o[d]=de(h,y))}return{c(){t=g("div"),n=g("div"),n.innerHTML='<p class="svelte-upbmct">Click to upload</p>',s=$(),l=g("div");for(let d=0;d<o.length;d+=1)o[d].c();f=$(),c=g("form"),i=g("input"),m(n,"class","upload svelte-upbmct"),m(l,"class","list svelte-upbmct"),m(i,"type","file"),m(i,"name","fileUpload"),m(i,"id","fileUpload"),te(i,"opacity","0"),te(i,"height","0px"),te(i,"width","0px"),m(i,"accept","video/mp4,video/x-m4v,video/*"),m(c,"method","POST"),m(c,"enctype","multipart/form-data"),m(c,"action",`${window.apiHost}/upload`),m(t,"class","container svelte-upbmct")},m(d,y){S(d,t,y),p(t,n),p(t,s),p(t,l);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(l,null);p(t,f),p(t,c),p(c,i),e[11](i),e[12](c),r||(a=[A(n,"click",e[7]),A(i,"change",e[8])],r=!0)},p(d,[y]){y&115&&(_=fe(d[0]),o=Oe(o,y,b,1,d,_,u,l,Me,de,null,ae))},i:w,o:w,d(d){d&&k(t);for(let y=0;y<o.length;y+=1)o[y].d();e[11](null),e[12](null),r=!1,P(a)}}}function Ne(e,t,n){let s;_e(e,q,h=>n(4,s=h));let l=[],o="";async function u(h){const M=await(await fetch(`${window.apiHost}/videos/${h}`,{method:"DELETE"})).json();n(0,l=M)}async function f(h){n(1,o=h)}let c,i;function r(){c.click()}async function a(){i.submit()}re(async()=>{const H=await(await fetch(`${window.apiHost}/videos`)).json();n(0,l=H)});const _=h=>f(h),b=h=>u(h.uuid);function d(h){W[h?"unshift":"push"](()=>{c=h,n(2,c)})}function y(h){W[h?"unshift":"push"](()=>{i=h,n(3,i)})}return[l,o,c,i,s,u,f,r,a,_,b,d,y]}class Te extends Y{constructor(t){super(),X(this,t,Ne,je,x,{})}}function Ve(e){let t,n,s,l,o;return{c(){t=g("button"),n=C("Start"),t.disabled=s=e[0].fetching},m(u,f){S(u,t,f),p(t,n),l||(o=A(t,"click",e[4]),l=!0)},p(u,f){f&1&&s!==(s=u[0].fetching)&&(t.disabled=s)},d(u){u&&k(t),l=!1,o()}}}function ze(e){let t,n,s,l,o,u,f,c,i;return{c(){t=g("button"),n=C("Restart"),l=$(),o=g("button"),u=C("Stop"),t.disabled=s=e[0].fetching||!0,o.disabled=f=e[0].fetching},m(r,a){S(r,t,a),p(t,n),S(r,l,a),S(r,o,a),p(o,u),c||(i=[A(t,"click",e[2]),A(o,"click",e[3])],c=!0)},p(r,a){a&1&&s!==(s=r[0].fetching||!0)&&(t.disabled=s),a&1&&f!==(f=r[0].fetching)&&(o.disabled=f)},d(r){r&&(k(t),k(l),k(o)),c=!1,P(i)}}}function qe(e){let t,n,s,l=e[0].text+"",o,u,f;function c(a,_){return a[0].running?ze:Ve}let i=c(e),r=i(e);return{c(){t=g("div"),n=g("div"),s=g("p"),o=C(l),u=$(),f=g("div"),r.c(),m(s,"class","svelte-19pv4h"),m(n,"class","status svelte-19pv4h"),m(f,"class","controlls svelte-19pv4h"),m(t,"class","container svelte-19pv4h")},m(a,_){S(a,t,_),p(t,n),p(n,s),p(s,o),p(t,u),p(t,f),r.m(f,null)},p(a,[_]){_&1&&l!==(l=a[0].text+"")&&Q(o,l),i===(i=c(a))&&r?r.p(a,_):(r.d(1),r=i(a),r&&(r.c(),r.m(f,null)))},i:w,o:w,d(a){a&&k(t),r.d()}}}function Fe(e,t,n){let s;_e(e,q,c=>n(0,s=c));async function l(c){q.update(a=>(a.fetching=!0,a));const r=await(await fetch(`${window.apiHost}/vlc/${c}`)).json();q.set(r)}return re(async()=>{const i=await(await fetch(`${window.apiHost}/vlc`)).json();q.set(i)}),[s,l,()=>l("restart"),()=>l("stop"),()=>l("start")]}class Be extends Y{constructor(t){super(),X(this,t,Fe,qe,x,{})}}function Ie(e){let t,n,s,l,o,u,f;return{c(){t=g("footer"),n=g("div"),s=g("div"),o=$(),u=g("p"),f=C(e[0]),m(s,"class","status svelte-mmkx9b"),m(s,"style",l=`background-color: var(--color-${e[0]})`),m(u,"class","svelte-mmkx9b"),m(n,"class","left svelte-mmkx9b"),m(t,"class","svelte-mmkx9b")},m(c,i){S(c,t,i),p(t,n),p(n,s),p(n,o),p(n,u),p(u,f)},p(c,[i]){i&1&&l!==(l=`background-color: var(--color-${c[0]})`)&&m(s,"style",l),i&1&&Q(f,c[0])},i:w,o:w,d(c){c&&k(t)}}}function xe(e,t,n){let s="Pending",l=fetch(`${window.apiHost}/ping`);return re(async()=>{if(!(await l).ok){n(0,s="Unreachable");return}n(0,s="Reachable")}),[s]}class Ue extends Y{constructor(t){super(),X(this,t,xe,Ie,x,{})}}function De(e){let t,n,s,l,o,u,f,c,i;return s=new Te({}),u=new Be({}),c=new Ue({}),{c(){t=g("main"),n=g("div"),ie(s.$$.fragment),l=$(),o=g("div"),ie(u.$$.fragment),f=$(),ie(c.$$.fragment),m(n,"class","clips svelte-1moa0yz"),m(o,"class","controls svelte-1moa0yz"),m(t,"class","svelte-1moa0yz")},m(r,a){S(r,t,a),p(t,n),G(s,n,null),p(t,l),p(t,o),G(u,o,null),S(r,f,a),G(c,r,a),i=!0},p:w,i(r){i||(B(s.$$.fragment,r),B(u.$$.fragment,r),B(c.$$.fragment,r),i=!0)},o(r){se(s.$$.fragment,r),se(u.$$.fragment,r),se(c.$$.fragment,r),i=!1},d(r){r&&(k(t),k(f)),J(s),J(u),J(c,r)}}}class Re extends Y{constructor(t){super(),X(this,t,null,De,x,{})}}window.apiHost="http://localhost:3001";new Re({target:document.getElementById("app")});
