var ye=Object.defineProperty;var be=(e,t,n)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>(be(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function w(){}function _e(e){return e()}function fe(){return Object.create(null)}function M(e){e.forEach(_e)}function me(e){return typeof e=="function"}function U(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function we(e){return Object.keys(e).length===0}function $e(e,...t){if(e==null){for(const s of t)s(void 0);return w}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Q(e,t,n){e.$$.on_destroy.push($e(t,n))}function h(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function $(){return j(" ")}function A(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ke(e){return Array.from(e.childNodes)}function W(e,t){t=""+t,e.data!==t&&(e.data=t)}function ne(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function x(e,t,n){e.classList.toggle(t,!!n)}let I;function F(e){I=e}function Ee(){if(!I)throw new Error("Function called outside component initialization");return I}function ue(e){Ee().$$.on_mount.push(e)}const T=[],X=[];let N=[];const ae=[],Le=Promise.resolve();let oe=!1;function Se(){oe||(oe=!0,Le.then(ge))}function ce(e){N.push(e)}const se=new Set;let V=0;function ge(){if(V!==0)return;const e=I;do{try{for(;V<T.length;){const t=T[V];V++,F(t),Ce(t.$$)}}catch(t){throw T.length=0,V=0,t}for(F(null),T.length=0,V=0;X.length;)X.pop()();for(let t=0;t<N.length;t+=1){const n=N[t];se.has(n)||(se.add(n),n())}N.length=0}while(T.length);for(;ae.length;)ae.pop()();oe=!1,se.clear(),F(e)}function Ce(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ce)}}function He(e){const t=[],n=[];N.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),N=t}const J=new Set;let Oe;function B(e,t){e&&e.i&&(J.delete(e),e.i(t))}function ie(e,t,n,s){if(e&&e.o){if(J.has(e))return;J.add(e),Oe.c.push(()=>{J.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function de(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function je(e,t){e.d(1),t.delete(e.key)}function Me(e,t,n,s,o,l,r,f,u,i,c,a){let _=e.length,y=l.length,d=_;const b={};for(;d--;)b[e[d].key]=d;const p=[],C=new Map,H=new Map,z=[];for(d=y;d--;){const v=a(o,l,d),E=n(v);let L=r.get(E);L?s&&z.push(()=>L.p(v,t)):(L=i(E,v),L.c()),C.set(E,p[d]=L),E in b&&H.set(E,Math.abs(d-b[E]))}const D=new Set,R=new Set;function O(v){B(v,1),v.m(f,c),r.set(v.key,v),c=v.first,y--}for(;_&&y;){const v=p[y-1],E=e[_-1],L=v.key,Z=E.key;v===E?(c=v.first,_--,y--):C.has(Z)?!r.has(L)||D.has(L)?O(v):R.has(Z)?_--:H.get(L)>H.get(Z)?(R.add(L),O(v)):(D.add(Z),_--):(u(E,r),_--)}for(;_--;){const v=e[_];C.has(v.key)||u(v,r)}for(;y;)O(p[y-1]);return M(z),p}function le(e){e&&e.c()}function K(e,t,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),ce(()=>{const l=e.$$.on_mount.map(_e).filter(me);e.$$.on_destroy?e.$$.on_destroy.push(...l):M(l),e.$$.on_mount=[]}),o.forEach(ce)}function G(e,t){const n=e.$$;n.fragment!==null&&(He(n.after_update),M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ae(e,t){e.$$.dirty[0]===-1&&(T.push(e),Se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(e,t,n,s,o,l,r,f=[-1]){const u=I;F(e);const i=e.$$={fragment:null,ctx:[],props:l,update:w,not_equal:o,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:fe(),dirty:f,skip_bound:!1,root:t.target||u.$$.root};r&&r(i.root);let c=!1;if(i.ctx=n?n(e,t.props||{},(a,_,...y)=>{const d=y.length?y[0]:_;return i.ctx&&o(i.ctx[a],i.ctx[a]=d)&&(!i.skip_bound&&i.bound[a]&&i.bound[a](d),c&&Ae(e,a)),_}):[],i.update(),c=!0,M(i.before_update),i.fragment=s?s(i.ctx):!1,t.target){if(t.hydrate){const a=ke(t.target);i.fragment&&i.fragment.l(a),a.forEach(k)}else i.fragment&&i.fragment.c();t.intro&&B(e.$$.fragment),K(e,t.target,t.anchor),ge()}F(u)}class ee{constructor(){te(this,"$$");te(this,"$$set")}$destroy(){G(this,1),this.$destroy=w}$on(t,n){if(!me(n))return w;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ve="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ve);const P=[];function ve(e,t=w){let n;const s=new Set;function o(f){if(U(e,f)&&(e=f,n)){const u=!P.length;for(const i of s)i[1](),P.push(i,e);if(u){for(let i=0;i<P.length;i+=2)P[i][0](P[i+1]);P.length=0}}}function l(f){o(f(e))}function r(f,u=w){const i=[f,u];return s.add(i),s.size===1&&(n=t(o,l)||w),f(e),()=>{s.delete(i),s.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}const q=ve({running:!1,text:"Loading",fetching:!0,playing:""}),re=ve("");function pe(e,t,n){const s=e.slice();return s[13]=t[n],s}function he(e,t){let n,s,o,l,r=t[13].filename+"",f,u,i,c=new Date(t[13].date)+"",a,_,y,d,b,p,C,H,z;function D(){return t[9](t[13])}function R(){return t[10](t[13])}return{key:e,first:null,c(){n=g("div"),s=g("div"),o=$(),l=g("p"),f=j(r),u=$(),i=g("span"),a=j(c),_=$(),y=g("div"),d=g("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z"></path></svg>',b=$(),p=g("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.413-.588T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.588 1.413T17 21H7Zm2-4h2V8H9v9Zm4 0h2V8h-2v9Z"></path></svg>',C=$(),m(s,"class","thumbnail"),m(l,"class","svelte-1nc478l"),m(y,"class","actions"),m(n,"class","video svelte-1nc478l"),x(n,"selected",t[13].uuid==t[3]),x(n,"playing",t[13].uuid==t[4].playing),this.first=n},m(O,v){S(O,n,v),h(n,s),h(n,o),h(n,l),h(l,f),h(n,u),h(n,i),h(i,a),h(n,_),h(n,y),h(y,d),h(y,b),h(y,p),h(n,C),H||(z=[A(d,"click",D),A(p,"click",R)],H=!0)},p(O,v){t=O,v&1&&r!==(r=t[13].filename+"")&&W(f,r),v&1&&c!==(c=new Date(t[13].date)+"")&&W(a,c),v&9&&x(n,"selected",t[13].uuid==t[3]),v&17&&x(n,"playing",t[13].uuid==t[4].playing)},d(O){O&&k(n),H=!1,M(z)}}}function Pe(e){let t,n,s,o,l=[],r=new Map,f,u,i,c,a,_=de(e[0]);const y=d=>d[13].uuid;for(let d=0;d<_.length;d+=1){let b=pe(e,_,d),p=y(b);r.set(p,l[d]=he(p,b))}return{c(){t=g("div"),n=g("div"),n.innerHTML='<p class="svelte-1nc478l">Click to upload</p>',s=$(),o=g("div");for(let d=0;d<l.length;d+=1)l[d].c();f=$(),u=g("form"),i=g("input"),m(n,"class","upload svelte-1nc478l"),m(o,"class","list svelte-1nc478l"),m(i,"type","file"),m(i,"name","fileUpload"),m(i,"id","fileUpload"),ne(i,"opacity","0"),ne(i,"height","0px"),ne(i,"width","0px"),m(i,"accept","video/mp4,video/x-m4v,video/*"),m(u,"method","POST"),m(u,"enctype","multipart/form-data"),m(u,"action",`${window.apiHost}/upload`),m(t,"class","container svelte-1nc478l")},m(d,b){S(d,t,b),h(t,n),h(t,s),h(t,o);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(o,null);h(t,f),h(t,u),h(u,i),e[11](i),e[12](u),c||(a=[A(n,"click",e[7]),A(i,"change",e[8])],c=!0)},p(d,[b]){b&121&&(_=de(d[0]),l=Me(l,b,y,1,d,_,r,o,je,he,null,pe))},i:w,o:w,d(d){d&&k(t);for(let b=0;b<l.length;b+=1)l[b].d();e[11](null),e[12](null),c=!1,M(a)}}}function Te(e,t,n){let s,o;Q(e,re,p=>n(3,s=p)),Q(e,q,p=>n(4,o=p));let l=[];async function r(p){const H=await(await fetch(`${window.apiHost}/videos/${p}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:"{}"})).json();n(0,l=H)}async function f(p){re.set(p)}let u,i;function c(){u.click()}async function a(){i.submit()}ue(async()=>{const C=await(await fetch(`${window.apiHost}/videos`)).json();n(0,l=C)});const _=p=>f(p.uuid),y=p=>r(p.uuid);function d(p){X[p?"unshift":"push"](()=>{u=p,n(1,u)})}function b(p){X[p?"unshift":"push"](()=>{i=p,n(2,i)})}return[l,u,i,s,o,r,f,c,a,_,y,d,b]}class Ne extends ee{constructor(t){super(),Y(this,t,Te,Pe,U,{})}}function ze(e){let t,n,s,o,l;return{c(){t=g("button"),n=j("Start"),t.disabled=s=e[0].fetching},m(r,f){S(r,t,f),h(t,n),o||(l=A(t,"click",e[4]),o=!0)},p(r,f){f&1&&s!==(s=r[0].fetching)&&(t.disabled=s)},d(r){r&&k(t),o=!1,l()}}}function qe(e){let t,n,s,o,l,r,f,u,i;return{c(){t=g("button"),n=j("Restart"),o=$(),l=g("button"),r=j("Stop"),t.disabled=s=e[0].fetching,l.disabled=f=e[0].fetching},m(c,a){S(c,t,a),h(t,n),S(c,o,a),S(c,l,a),h(l,r),u||(i=[A(t,"click",e[2]),A(l,"click",e[3])],u=!0)},p(c,a){a&1&&s!==(s=c[0].fetching)&&(t.disabled=s),a&1&&f!==(f=c[0].fetching)&&(l.disabled=f)},d(c){c&&(k(t),k(o),k(l)),u=!1,M(i)}}}function Fe(e){let t,n,s,o=e[0].text+"",l,r,f;function u(a,_){return a[0].running?qe:ze}let i=u(e),c=i(e);return{c(){t=g("div"),n=g("div"),s=g("p"),l=j(o),r=$(),f=g("div"),c.c(),m(s,"class","svelte-19pv4h"),m(n,"class","status svelte-19pv4h"),m(f,"class","controlls svelte-19pv4h"),m(t,"class","container svelte-19pv4h")},m(a,_){S(a,t,_),h(t,n),h(n,s),h(s,l),h(t,r),h(t,f),c.m(f,null)},p(a,[_]){_&1&&o!==(o=a[0].text+"")&&W(l,o),i===(i=u(a))&&c?c.p(a,_):(c.d(1),c=i(a),c&&(c.c(),c.m(f,null)))},i:w,o:w,d(a){a&&k(t),c.d()}}}function Be(e,t,n){let s,o;Q(e,re,i=>n(5,s=i)),Q(e,q,i=>n(0,o=i));async function l(i){q.update(_=>(_.fetching=!0,_));const a=await(await fetch(`${window.apiHost}/vlc/${i}`,{method:"put",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({uuid:s})})).json();q.set(a)}return ue(async()=>{const c=await(await fetch(`${window.apiHost}/vlc`)).json();q.set(c)}),[o,l,()=>l("restart"),()=>l("stop"),()=>l("start")]}class Ie extends ee{constructor(t){super(),Y(this,t,Be,Fe,U,{})}}function Ue(e){let t,n,s,o,l,r,f;return{c(){t=g("footer"),n=g("div"),s=g("div"),l=$(),r=g("p"),f=j(e[0]),m(s,"class","status svelte-mmkx9b"),m(s,"style",o=`background-color: var(--color-${e[0]})`),m(r,"class","svelte-mmkx9b"),m(n,"class","left svelte-mmkx9b"),m(t,"class","svelte-mmkx9b")},m(u,i){S(u,t,i),h(t,n),h(n,s),h(n,l),h(n,r),h(r,f)},p(u,[i]){i&1&&o!==(o=`background-color: var(--color-${u[0]})`)&&m(s,"style",o),i&1&&W(f,u[0])},i:w,o:w,d(u){u&&k(t)}}}function De(e,t,n){let s="Pending",o=fetch(`${window.apiHost}/ping`);return ue(async()=>{if(!(await o).ok){n(0,s="Unreachable");return}n(0,s="Reachable")}),[s]}class Re extends ee{constructor(t){super(),Y(this,t,De,Ue,U,{})}}function Ze(e){let t,n,s,o,l,r,f,u,i;return s=new Ne({}),r=new Ie({}),u=new Re({}),{c(){t=g("main"),n=g("div"),le(s.$$.fragment),o=$(),l=g("div"),le(r.$$.fragment),f=$(),le(u.$$.fragment),m(n,"class","clips svelte-1moa0yz"),m(l,"class","controls svelte-1moa0yz"),m(t,"class","svelte-1moa0yz")},m(c,a){S(c,t,a),h(t,n),K(s,n,null),h(t,o),h(t,l),K(r,l,null),S(c,f,a),K(u,c,a),i=!0},p:w,i(c){i||(B(s.$$.fragment,c),B(r.$$.fragment,c),B(u.$$.fragment,c),i=!0)},o(c){ie(s.$$.fragment,c),ie(r.$$.fragment,c),ie(u.$$.fragment,c),i=!1},d(c){c&&(k(t),k(f)),G(s),G(r),G(u,c)}}}class xe extends ee{constructor(t){super(),Y(this,t,null,Ze,U,{})}}window.apiHost="";new xe({target:document.getElementById("app")});
